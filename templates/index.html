<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Word Fantasy - RPG Teste</title>

<style>
body {
    background: #111;
    color: white;
    font-family: Arial;
    text-align: center;
}

.box {
    border: 2px solid #555;
    margin: 10px;
    padding: 10px;
    border-radius: 10px;
}

button {
    padding: 8px 15px;
    margin: 5px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
}

#log {
    background: #222;
    height: 150px;
    overflow-y: auto;
    text-align: left;
    padding: 10px;
}

img {
    margin: 10px;
}
</style>
</head>
<body>

<h1>âš”ï¸ Word Fantasy - Sistema Expandido</h1>

<div class="box">
<h2>ğŸ§™ Jogador</h2>
<img src="assets/imagens/jogador.png" width="150">
<p>NÃ­vel: <span id="nivel"></span></p>
<p>XP: <span id="xp"></span>/<span id="xpMax"></span></p>
<p>Vida: <span id="vida"></span></p>
<p>Ataque: <span id="ataque"></span></p>
<p>Defesa: <span id="defesa"></span></p>
<p>ğŸ’° Ouro: <span id="ouro"></span></p>
<p>ğŸ§ª PoÃ§Ãµes: <span id="pocoes"></span></p>
</div>

<div class="box">
<h2>ğŸ‘¹ Inimigo</h2>
<img id="imgInimigo" width="150">
<p>Nome: <span id="nomeInimigo"></span></p>
<p>Vida: <span id="vidaInimigo"></span></p>
</div>

<button onclick="atacar()">âš”ï¸ Atacar</button>
<button onclick="usarPocao()">ğŸ§ª Usar PoÃ§Ã£o</button>

<div class="box">
<h2>ğŸ’ InventÃ¡rio</h2>
<ul id="inventario"></ul>
<button onclick="venderItens()">ğŸ’° Vender Tudo</button>
</div>

<div class="box">
<h2>ğŸª Loja</h2>
<button onclick="comprarPocao()">ğŸ§ª Comprar PoÃ§Ã£o (20 ouro)</button>
<button onclick="comprarForca()">ğŸ’ª Treinar ForÃ§a (+4 permanente) (30 ouro)</button>
</div>

<h3>ğŸ“œ Log</h3>
<div id="log"></div>

<script>

let jogador;
let inimigo;

function iniciar() {
    jogador = {
        nivel: 1,
        xp: 0,
        xpMax: 50,
        vidaMax: 100,
        vida: 100,
        ataque: 15,
        defesa: 5,
        ouro: 0,
        inventario: [],
        pocoes: 0
    };

    gerarInimigo();
    atualizarTela();
}

function gerarInimigo() {

    let tipos = [
        {nome:"Goblin", drop:"Orelha de Goblin", ouro:10, img:"assets/imagens/goblin.png"},
        {nome:"Orc", drop:"Dente de Orc", ouro:15, img:"assets/imagens/orc.png"},
        {nome:"Esqueleto", drop:"Osso AmaldiÃ§oado", ouro:20, img:"assets/imagens/esqueleto.png"}
    ];

    let tipo = tipos[Math.floor(Math.random()*tipos.length)];

    // ğŸ”¥ Escala agora a cada 4 nÃ­veis
    let escala = Math.floor(jogador.nivel / 4) + 1;

    inimigo = {
        nome: tipo.nome,
        vida: 50 * escala,
        ataque: 10 * escala,
        drop: tipo.drop,
        valor: tipo.ouro,
        img: tipo.img
    };

    document.getElementById("imgInimigo").src = inimigo.img;

    atualizarTela();
}

function atacar() {

    if (jogador.vida <= 0) return;

    let dano = jogador.ataque;
    inimigo.vida -= dano;
    log("âš”ï¸ VocÃª causou " + dano + " de dano.");

    if (inimigo.vida <= 0) {
        log("ğŸ‘¹ " + inimigo.nome + " derrotado!");
        jogador.xp += 20;
        jogador.inventario.push({nome: inimigo.drop, valor: inimigo.valor});
        log("ğŸ Dropou: " + inimigo.drop);
        verificarLevelUp();
        gerarInimigo();
        return;
    }

    let danoInimigo = inimigo.ataque - jogador.defesa;
    if (danoInimigo < 0) danoInimigo = 0;

    jogador.vida -= danoInimigo;
    log("ğŸ‘¹ VocÃª recebeu " + danoInimigo + " de dano.");

    if (jogador.vida <= 0) {
        log("ğŸ’€ VocÃª morreu! Resetando...");
        setTimeout(iniciar,2000);
    }

    atualizarTela();
}

function verificarLevelUp() {
    if (jogador.xp >= jogador.xpMax) {
        jogador.xp -= jogador.xpMax;
        jogador.nivel++;
        jogador.xpMax += 30;
        jogador.vidaMax += 20;
        jogador.ataque += 5;
        jogador.defesa += 2;
        jogador.vida = jogador.vidaMax;
        log("ğŸ“ˆ LEVEL UP! Agora nÃ­vel " + jogador.nivel);
    }
}

function venderItens() {
    let total = 0;
    jogador.inventario.forEach(item => total += item.valor);
    jogador.ouro += total;
    jogador.inventario = [];
    log("ğŸ’° VocÃª ganhou " + total + " ouro.");
    atualizarTela();
}

function comprarPocao() {
    if (jogador.ouro >= 20) {
        jogador.ouro -= 20;
        jogador.pocoes++;
        log("ğŸ§ª PoÃ§Ã£o comprada!");
    } else {
        log("âŒ Ouro insuficiente.");
    }
    atualizarTela();
}

function usarPocao() {
    if (jogador.pocoes > 0) {
        jogador.pocoes--;
        jogador.vida += 40;
        if (jogador.vida > jogador.vidaMax) jogador.vida = jogador.vidaMax;
        log("ğŸ§ª VocÃª usou uma poÃ§Ã£o!");
    } else {
        log("âŒ VocÃª nÃ£o tem poÃ§Ãµes.");
    }
    atualizarTela();
}

function comprarForca() {
    if (jogador.ouro >= 30) {
        jogador.ouro -= 30;
        jogador.ataque += 4;
        log("ğŸ’ª VocÃª treinou forÃ§a! +4 Ataque permanente!");
    } else {
        log("âŒ Ouro insuficiente.");
    }
    atualizarTela();
}

function atualizarTela() {

    document.getElementById("nivel").innerText = jogador.nivel;
    document.getElementById("xp").innerText = jogador.xp;
    document.getElementById("xpMax").innerText = jogador.xpMax;
    document.getElementById("vida").innerText = jogador.vida + "/" + jogador.vidaMax;
    document.getElementById("ataque").innerText = jogador.ataque;
    document.getElementById("defesa").innerText = jogador.defesa;
    document.getElementById("ouro").innerText = jogador.ouro;
    document.getElementById("pocoes").innerText = jogador.pocoes;
    document.getElementById("nomeInimigo").innerText = inimigo.nome;
    document.getElementById("vidaInimigo").innerText = inimigo.vida;

    let lista = document.getElementById("inventario");
    lista.innerHTML = "";
    jogador.inventario.forEach(item => {
        lista.innerHTML += "<li>"+item.nome+" ("+item.valor+" ouro)</li>";
    });
}

function log(texto) {
    let l = document.getElementById("log");
    l.innerHTML += "<p>"+texto+"</p>";
    l.scrollTop = l.scrollHeight;
}

iniciar();

</script>
</body>
</html>
